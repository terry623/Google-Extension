{"version":3,"sources":["webpack:///webpack/bootstrap e87eaab7610f020c183a","webpack:///./popup/app.js","webpack:///./popup/popup.js","webpack:///./popup/helper.js","webpack:///./popup/pdf2html.js"],"names":["popup","api","pdf2html","helper","window","_crypto","$","fn","settings","successTest","response","success","document","ready","hide","chrome","tabs","query","active","windowId","windows","WINDOW_ID_CURRENT","acix","url","console","log","stu_no","course_no_file","course_have_file","course_from_ISS","phaseNo","dropdown","shape","accordion","click","on","hasClass","addClass","siblings","removeClass","t","show","not","getUrlVars","vars","hash","hashes","slice","indexOf","split","i","length","push","pdfjsLib","GlobalWorkerOptions","workerSrc","pdfDoc","pageNum","pageRendering","pageNumPending","scale","canvas","ctx","renderPage","num","getPage","then","page","viewport","getViewport","height","width","renderContext","canvasContext","renderTask","render","promise","getElementById","textContent","queueRenderPage","onPrevPage","onNextPage","numPages","transform","getContext","addEventListener","getDocument","pdfDoc_"],"mappings":"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","file":"popup.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e87eaab7610f020c183a","import * as popup from \"./popup\";\r\nimport * as api from \"./api\";\r\nimport * as pdf2html from \"./pdf2html\";\r\nimport * as helper from \"./helper\";\r\n\n\n\n// WEBPACK FOOTER //\n// ./popup/app.js","window._crypto = null;\r\nimport { getUrlVars } from \"./helper\";\r\nimport { getUserName, getCourseInfo, getResultCourse, getGrade } from \"./api\";\r\n\r\n$.fn.api.settings.api = {\r\n  // \"get user\":\r\n  //   \"https://www.ccxp.nthu.edu.tw/ccxp/INQUIRE/JH/4/4.19/JH4j002.php?ACIXSTORE={ACIXSTORE}\"\r\n};\r\n\r\n$.fn.api.settings.successTest = function(response) {\r\n  if (response && response.success) {\r\n    return response.success;\r\n  }\r\n  return false;\r\n};\r\n\r\n$(document).ready(function() {\r\n  $(\".content_item\").hide();\r\n\r\n  chrome.tabs.query(\r\n    { active: true, windowId: chrome.windows.WINDOW_ID_CURRENT },\r\n    function(tabs) {\r\n      var acix = getUrlVars(tabs[0].url)[\"ACIXSTORE\"];\r\n      console.log(\"ACIXSTORE is \" + acix);\r\n      getUserName(acix);\r\n\r\n      var stu_no = getUrlVars(tabs[0].url)[\"hint\"];\r\n\r\n      // TODO:有的科目空白數是一格，有的是兩個，要用 OR 的做處理\r\n      const course_no_file = \"10620CS  342300\";\r\n      const course_have_file = \"10620CS  340400\";\r\n      const course_from_ISS = \"10620ISS 508400\";\r\n      getCourseInfo(acix, course_from_ISS);\r\n\r\n      //  選課紀錄\r\n      //  100  第 1 次選課 log 記錄\r\n      //  100P 第 1 次選課亂數結果\r\n      //  101P 第 2 次選課 log 記錄\r\n      //  101P 第 2 次選課結束(已亂數處理)\r\n      //  200  第 3 次選課 log 記錄\r\n      //  200P 第 3 次選課結束(已亂數處理)\r\n      //  200S 加退選開始前(含擋修、衝堂)\r\n      //  300  加退選 log 記錄\r\n      //  300P 加退選結束(已處理)\r\n      //  400  停修 log 記錄\r\n      var phaseNo = \"100\";\r\n      getResultCourse(acix, stu_no, phaseNo, \"106\", \"20\");\r\n    }\r\n  );\r\n});\r\n\r\n// Initial\r\n$(\".ui.dropdown\").dropdown();\r\n$(\".shape\").shape();\r\n$(\".ui.accordion\").accordion();\r\n$(\"#clicktoflip\").click(function() {\r\n  $(\".shape\").shape(\"flip right\");\r\n});\r\n$(\".ui.tabular.menu\").on(\"click\", \".item\", function() {\r\n  if (!$(this).hasClass(\"dropdown\")) {\r\n    $(this)\r\n      .addClass(\"active\")\r\n      .siblings(\".item\")\r\n      .removeClass(\"active\");\r\n\r\n    var t = $(\".ui.compact.table\");\r\n    t.show();\r\n\r\n    if ($(this).hasClass(\"tab1\")) t.not(\".tab1\").hide();\r\n    else if ($(this).hasClass(\"tab2\")) t.not(\".tab2\").hide();\r\n  }\r\n});\r\n\r\n$(\".ui.pointing.menu\").on(\"click\", \".item\", function() {\r\n  if (!$(this).hasClass(\"dropdown\")) {\r\n    $(this)\r\n      .addClass(\"active\")\r\n      .siblings(\".item\")\r\n      .removeClass(\"active\");\r\n\r\n    var t = $(\".content_item\");\r\n    t.show();\r\n\r\n    if ($(this).hasClass(\"homePage\")) t.not(\".homePage\").hide();\r\n    else if ($(this).hasClass(\"searchPage\")) t.not(\".searchPage\").hide();\r\n    else if ($(this).hasClass(\"choosePage\")) t.not(\".choosePage\").hide();\r\n    else if ($(this).hasClass(\"recommendPage\")) t.not(\".recommendPage\").hide();\r\n    else if ($(this).hasClass(\"singlePage\")) t.not(\".singlePage\").hide();\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./popup/popup.js","function getUrlVars(url) {\r\n  var vars = [];\r\n  var hash;\r\n  var hashes = url.slice(url.indexOf(\"?\") + 1).split(\"&\");\r\n  for (var i = 0; i < hashes.length; i++) {\r\n    hash = hashes[i].split(\"=\");\r\n    vars.push(hash[0]);\r\n    vars[hash[0]] = hash[1];\r\n  }\r\n  return vars;\r\n}\r\n\r\nexport { getUrlVars };\r\n\n\n\n// WEBPACK FOOTER //\n// ./popup/helper.js","// If absolute URL from the remote server is provided, configure the CORS\r\n// header on that server.\r\n// var url;\r\n\r\n// Loaded via <script> tag, create shortcut to access PDF.js exports.\r\nvar pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\r\n\r\n// The workerSrc property shall be specified.\r\npdfjsLib.GlobalWorkerOptions.workerSrc =\r\n  \"../node_modules/pdfjs-dist/build/pdf.worker.js\";\r\n\r\nvar pdfDoc = null,\r\n  pageNum = 1,\r\n  pageRendering = false,\r\n  pageNumPending = null,\r\n  scale = 0.8,\r\n  canvas,\r\n  ctx;\r\n\r\n/**\r\n * Get page info from document, resize canvas accordingly, and render page.\r\n * @param num Page number.\r\n */\r\nfunction renderPage(num) {\r\n  pageRendering = true;\r\n  // Using promise to fetch the page\r\n  pdfDoc.getPage(num).then(function(page) {\r\n    var viewport = page.getViewport(scale);\r\n    canvas.height = viewport.height;\r\n    canvas.width = viewport.width;\r\n\r\n    // Render PDF page into canvas context\r\n    var renderContext = {\r\n      canvasContext: ctx,\r\n      viewport: viewport\r\n    };\r\n    var renderTask = page.render(renderContext);\r\n\r\n    // Wait for rendering to finish\r\n    renderTask.promise.then(function() {\r\n      pageRendering = false;\r\n      if (pageNumPending !== null) {\r\n        // New page rendering is pending\r\n        renderPage(pageNumPending);\r\n        pageNumPending = null;\r\n      }\r\n    });\r\n  });\r\n\r\n  // Update page counters\r\n  document.getElementById(\"page_num\").textContent = num;\r\n}\r\n\r\n/**\r\n * If another page rendering in progress, waits until the rendering is\r\n * finised. Otherwise, executes rendering immediately.\r\n */\r\nfunction queueRenderPage(num) {\r\n  if (pageRendering) {\r\n    pageNumPending = num;\r\n  } else {\r\n    renderPage(num);\r\n  }\r\n}\r\n\r\n/**\r\n * Displays previous page.\r\n */\r\nfunction onPrevPage() {\r\n  if (pageNum <= 1) {\r\n    return;\r\n  }\r\n  pageNum--;\r\n  queueRenderPage(pageNum);\r\n}\r\n\r\n/**\r\n * Displays next page.\r\n */\r\nfunction onNextPage() {\r\n  if (pageNum >= pdfDoc.numPages) {\r\n    return;\r\n  }\r\n  pageNum++;\r\n  queueRenderPage(pageNum);\r\n}\r\n\r\nfunction transform(url) {\r\n  /**\r\n   * Asynchronously downloads PDF.\r\n   */\r\n  canvas = document.getElementById(\"the-canvas\");\r\n  ctx = canvas.getContext(\"2d\");\r\n\r\n  document.getElementById(\"prev\").addEventListener(\"click\", onPrevPage);\r\n  document.getElementById(\"next\").addEventListener(\"click\", onNextPage);\r\n\r\n  pdfjsLib.getDocument(url).then(function(pdfDoc_) {\r\n    pdfDoc = pdfDoc_;\r\n    document.getElementById(\"page_count\").textContent = pdfDoc.numPages;\r\n\r\n    // Initial/first page rendering\r\n    renderPage(pageNum);\r\n  });\r\n}\r\n\r\nexport { transform };\r\n\n\n\n// WEBPACK FOOTER //\n// ./popup/pdf2html.js"],"sourceRoot":""}